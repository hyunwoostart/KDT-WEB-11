<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
        function goMart() {
            console.log('마트에 가서 어떤 음료를 살지 고민한다');
        }

        function pickDrink() {
            return new Promise(function (resolve, reject) {
                setTimeout(() => {
                    console.log('고민 끝!!');
                    product = '제로 콜라';
                    price = 2000;
                    resolve();
                }, 3000);
            });
        };

        function pay() {
            console.log(`상품명: ${product}, 가격: ${price}`)
        }

        let product;
        let price;
        goMart();
        pickDrink().then(pay);
        */

        /*
        function add(n1, n2, cb)  {
            setTimeout(() => {
                let result = n1 + n2;
                cb(result);
            }, 1000);
        }

        function mul(n, cb) {
            setTimeout(() => {
                let result = n * 2;
                cb(result);
            }, 700);
        }

        function sub(n, cb) {
            setTimeout(() => {
                let result = n - 1;
                cb(result);
            }, 500);
        }

        add(4, 3, function (x) {
            console.log('1: ', x);
            mul(x, function (y) {
                console.log('2: ', y);
                sub(y, function (z) {
                    console.log('3: ', z);
                })
            })
        })
        */

        /*
        function add(n1, n2) {
            return new Promise(function (resolve, reject) {
                setTimeout(() => {
                    let result = n1 + n2;
                    resolve(result);
                }, 1000);
            });
        }

        function mul(n) {
            return new Promise(function (resolve, reject) {
                setTimeout(() => {
                    let result = n * 2;
                    resolve(result);
                }, 700);
            });
        }

        function sub(n) {
            return new Promise(function (resolve, reject) {
                setTimeout(() => {
                    let result = n - 1;
                    
                    reject(new Error('의도적으로 에러를 일으켜봤음!'));
                }, 500);
            })
        }

        add(4, 3)
            .then(function (result) {
                console.log('1: ', result);
                return mul(result);
            })
            .then(function (result) {
                console.log('2: ', result);
                return sub(result);
            })
            .then(function (result) {
                console.log('3: ', result);
            })
            .catch(function (err) {
                console.log('실패!');
                console.log(err);
            });

        */

        // function call(name) {
        //     return new Promise((resolve) => {
        //         setTimeout(() => {
        //             console.log(name);
        //             resolve(name);
        //         }, 1000);
        //     })
        // }

        // function back() {
        //     return new Promise((resolve) => {
        //         setTimeout(() => {
        //             console.log('back');
        //             resolve('back');
        //         }, 1000);
        //     })
        // }

        // function hell() {
        //     return new Promise((resolve) => {
        //         setTimeout(() => {
        //             resolve('callback hell');
        //         }, 1000);
        //     })
        // }

        // call('kim')
        // .then((res) => {
        //     console.log(`${res} 반가워`);
        //     return back();
        // })
        // .then((res1) => {
        //     console.log(`back 을 실행했구나`);
        //     return hell();
        // })
        // .then((res2) => {
        //     console.log(`여기는 ${res2}`);
        // });

        // let exec = async() => {
        //     let name = await call('kim');
        //     console.log(`${name} 반가워`);
        //     let res = await back();
        //     console.log(`${res}을 실행했구나`);
        //     let result = await hell();
        //     console.log(`여기는 ${result}`);
        // }

        // exec();


        // let changeBgColor = (newColor, delay) => {
        //     return new Promise((resolve) => {
        //         setTimeout(() => {
        //             document.body.style.backgroundColor = newColor;
        //             resolve();
        //         }, delay);
        //     });
        // }

        // changeBgColor('red', 1000)
        // .then(() => {
        //     return changeBgColor('orange', 2000);
        // })
        // .then(() => {
        //     return changeBgColor('blue', 2000);
        // })
        // .then(() => {
        //     return changeBgColor('black', 2000);
        // })
        // .then(() => {
        //     return changeBgColor('coral', 2000);
        // })

        let colorbg = (newBg, delay) => {
            return new Promise((resolve) => {
                setTimeout(() => {
                    document.body.style.backgroundColor = newBg;
                    resolve();
                }, delay);
            })
        }

        colorbg('red', 1000)
        .then(() => {
            return colorbg('orange', 500)
        })
        .then(() => {
            return colorbg('blue', 500)
        })
        .then(() => {
            return colorbg('black', 500)
        })
        .then(() => {
            return colorbg('lightblue', 500)
        })













        /*
        function call(name) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    console.log(name);
                    resolve(name);
                }, 1000);
            })
        }
        function back() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    console.log('back')
                    resolve('back');
                }, 1000);
            })
        }
        function hell() {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve('callback hell');
                }, 1000);
            })
        }
        
        // promise 실행
        call('kim').then((res) => {
            console.log(`${res} 반가워`);
            return back();
        })
        .then((res1) => {
            console.log(`${res1}을 실행 했구나`);
            return hell();
        })
        .then((res2) => {
            console.log(`여기는 ${res2}`);
        });
        */

        // let exec = async () => {
        //     let name = await call('kim');
        //     console.log(`${name} 반가워`);

        //     let res1 = await back();
        //     console.log(`${res1} 을 실행했구나`);

        //     let res2 = await hell();
        //     console.log(`여기는 ${res2}`);
        // };

        // exec();

        // async function exec() {
        //     let name = await call('kim');
        //     console.log(`${name} 반가워`);
        //     let res = await back();
        //     console.log(`${res}을 실행 했구나`);
        //     let result = await hell();
        //     console.log(`여기는 ${result}`);
        // }

        // exec();
    </script>
</body>
</html>